(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81752030"],{"0b04":function(e,t,a){a("99af");var r=a("ded3"),n=a("4082");e.exports={functional:!0,render:function(e,t){var a=t._c,s=(t._v,t.data),o=t.children,i=void 0===o?[]:o,l=s.class,c=s.staticClass,d=s.style,u=s.staticStyle,m=s.attrs,f=void 0===m?{}:m,v=n(s,["class","staticClass","style","staticStyle","attrs"]);return a("svg",r({class:[l,c],style:[d,u],attrs:Object.assign({width:"35",height:"35",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f)},v),i.concat([a("path",{attrs:{d:"M42.667 34H21.333c-1.093 0-2-.907-2-2s.907-2 2-2h21.334c1.093 0 2 .907 2 2s-.907 2-2 2z",fill:"#2082DB"}}),a("path",{attrs:{d:"M32 44.667c-1.093 0-2-.907-2-2V21.333c0-1.093.907-2 2-2s2 .907 2 2v21.334c0 1.093-.907 2-2 2z",fill:"#2082DB"}})]))}}},"46d8":function(e,t,a){"use strict";a("7d5a")},6395:function(e,t,a){},"798d":function(e,t,a){"use strict";a("d24b")},"7d5a":function(e,t,a){},a134:function(e,t,a){"use strict";a("6395")},b3b1:function(e,t,a){"use strict";var r=a("cee4"),n=a("2b0e");t["a"]={create:function(e){var t=n["default"].$cookies.get("admin-token");return Object(r["a"])({method:"POST",url:"/gateways/admin",headers:{Authorization:"Bearer ".concat(t)},data:e})},getAll:function(){var e=n["default"].$cookies.get("admin-token");return Object(r["a"])({method:"GET",url:"/gateways/admin",headers:{Authorization:"Bearer ".concat(e)}})},getOne:function(e){var t=n["default"].$cookies.get("admin-token");return Object(r["a"])({method:"GET",url:"/gateways/admin"+"/".concat(e),headers:{Authorization:"Bearer ".concat(t)}})},edit:function(e,t){var a=n["default"].$cookies.get("admin-token");return Object(r["a"])({method:"PATCH",url:"/gateways/admin"+"/".concat(e),headers:{Authorization:"Bearer ".concat(a)},data:t})},delete:function(e){var t=n["default"].$cookies.get("admin-token");return Object(r["a"])({method:"DELETE",url:"/gateways/admin"+"/".concat(e),headers:{Authorization:"Bearer ".concat(t)}})}}},d24b:function(e,t,a){},d5d7:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{staticClass:"base-modal",attrs:{persistent:"","max-width":e.maxWidth},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-main"},[a("span",{staticClass:"modal-main__close",on:{click:function(t){return e.$emit("close")}}},[e._v("×")]),a("div",{staticClass:"modal-main__title"},[e._v(e._s(e.title))]),e._t("default")],2)])])},n=[],s=(a("a9e3"),{name:"base-model",props:{show:{reqiure:!0,type:Boolean,default:!1},maxWidth:{reqiure:!0,type:Number,default:250},title:{reqiure:!0,type:String,default:""}}}),o=s,i=(a("798d"),a("2877")),l=Object(i["a"])(o,r,n,!1,null,null,null);t["a"]=l.exports},d6f3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page__header"},[a("h1",[e._v("گیت وی ها")]),a("div",{staticClass:"page__create",on:{click:function(t){return e.addSensor()}}},[a("addSvg"),a("span",[e._v("افزودن گیت وی ")])],1)]),a("div",{staticClass:"mt-6"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.sensors,"items-per-page":5,loading:e.getLoading},scopedSlots:e._u([{key:"item.createdAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(new Date(a.createdAt).toLocaleTimeString("fa-IR"))+" "+e._s(new Date(a.createdAt).toLocaleDateString("fa-IR"))+" ")]}},{key:"item.phoneNumber",fn:function(t){var r=t.item;return[a("div",{staticStyle:{direction:"initial"}},[e._v(" "+e._s(r.phoneNumber)+" ")])]}},{key:"item.operation",fn:function(t){var r=t.item;return[a("v-btn",{staticClass:"ma-1",attrs:{color:"primary","x-small":"",outlined:""},on:{click:function(t){return e.edit(r)}}},[e._v(" ویرایش ")]),a("v-btn",{staticClass:"ma-1",attrs:{color:"error","x-small":"",outlined:""},on:{click:function(t){return e.deleteSensor(r)}}},[e._v(" حذف ")])]}}])})],1),a("base-modal",{attrs:{show:e.dialog,maxWidth:700,title:("add"===e.mode?"افزودن":"ویرایش")+" گیت وی"},on:{close:function(t){e.dialog=!1}}},[a("div",[a("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[a("form",{staticClass:"form",on:{submit:function(t){return r(e.add)}}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("ValidationProvider",{attrs:{name:"نام",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{attrs:{label:"نام",variant:"underlined","error-messages":r[0]},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("ValidationProvider",{attrs:{name:"مک آدرس (mac address)",rules:"required|macAddress"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{attrs:{label:"مک آدرس (mac address)",variant:"underlined","error-messages":r[0],disabled:"edit"==e.mode},model:{value:e.model.macAddress,callback:function(t){e.$set(e.model,"macAddress",t)},expression:"model.macAddress"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("ValidationProvider",{attrs:{name:"آی پی (ip v4)",rules:"required|ipv4"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{attrs:{label:"آی پی (ip v4)",variant:"underlined","error-messages":r[0]},model:{value:e.model.ipv4,callback:function(t){e.$set(e.model,"ipv4",t)},expression:"model.ipv4"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("ValidationProvider",{attrs:{name:"نسخه",rules:"required|version"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-text-field",{attrs:{label:"نسخه",variant:"underlined",hint:"برای مثال v1.0.0","error-messages":r[0]},model:{value:e.model.version,callback:function(t){e.$set(e.model,"version",t)},expression:"model.version"}})]}}],null,!0)})],1),"add"==e.mode?a("v-col",{attrs:{cols:"12",sm:"6"}},[a("ValidationProvider",{attrs:{name:"مد",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[a("v-autocomplete",{attrs:{items:e.selectUsers,label:"کاربر ","item-text":"title","item-value":"value","error-messages":r[0]},model:{value:e.model.userID,callback:function(t){e.$set(e.model,"userID",t)},expression:"model.userID"}})]}}],null,!0)})],1):e._e(),a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-btn",{attrs:{color:"primary",block:""},on:{click:e.add}},[e._v("ثبت")])],1)],1)],1)]}}])})],1)]),a("confirmModal",{attrs:{show:e.deleteConfirmDialog,title:"حذف گیت وی",message:"آیا می خواهید گیت وی را حذف کنید"},on:{cancel:function(t){e.deleteConfirmDialog=!1},close:function(t){e.deleteConfirmDialog=!1},confirm:function(t){return e.deleteSensorConfirm()}}})],1)},n=[],s=(a("7db0"),a("4160"),a("d81d"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),o=a("7bb1"),i=a("0b04"),l=a.n(i),c=a("d5d7"),d=a("b3b1"),u=a("eb44"),m=a("cee4"),f={name:"sensor",components:{addSvg:l.a,BaseModal:c["a"],ValidationObserver:o["a"],ValidationProvider:o["b"],confirmModal:u["a"]},data:function(){return{dialog:!1,mode:"add",createLoading:!1,getLoading:!1,model:{macAddress:"5f:5f:5f:5f:5f:5f",ipv4:"1.1.1.1",name:"test",version:"v0.0.1",userID:null},sensors:[],selected:null,deleteConfirmDialog:!1,headers:[{text:"نام",align:"center",sortable:!1,value:"name"},{text:"مک آدرس",align:"center",sortable:!1,value:"macAddress"},{text:"آی پی",align:"center",sortable:!1,value:"ipv4"},{text:"نسخه",align:"center",sortable:!1,value:"version"},{text:"تاریخ ایجاد",align:"center",sortable:!1,value:"createdAt"},{text:"شماره موبایل",align:"center",sortable:!1,value:"phoneNumber"},{text:"عملیات",align:"center",sortable:!1,value:"operation"}],users:[]}},watch:{dialog:function(e){e||(this.model={macAddress:"",ipv4:"",name:"",version:"",userID:null},this.$refs.form.reset())}},mounted:function(){this.getAll()},computed:{selectUsers:function(){return this.users.map((function(e){return{title:e.phoneNumber,value:e._id}}))}},methods:{getProfile:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(m["a"])({method:"GET",url:"/users",headers:{Authorization:"Bearer "+e.$cookies.get("admin-token")}});case 4:a=t.sent,r=a.data,e.users=r,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$toast.error("خطایی رخ داد");case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})))()},getAll:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getLoading=!0,t.prev=1,t.next=4,d["a"].getAll();case 4:return a=t.sent,r=a.data,t.next=8,e.getProfile();case 8:r.forEach((function(t){var a;t.phoneNumber=(null===(a=e.users.find((function(e){return e._id===t.userID})))||void 0===a?void 0:a.phoneNumber)||"-"})),console.log(r),e.sensors=r,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),e.$toast.error("خطایی رخ داد");case 16:return t.prev=16,e.getLoading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})))()},add:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=console,t.next=3,e.$refs.form.validate();case 3:return t.t1=t.sent,t.t0.log.call(t.t0,t.t1),t.next=7,e.$refs.form.validate();case 7:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:if(e.createLoading=!0,t.prev=10,"add"!==e.mode){t.next=16;break}return t.next=14,d["a"].create(e.model);case 14:t.next=18;break;case 16:return t.next=18,d["a"].edit(e.selected._id,{name:e.model.name,version:e.model.version,ipv4:e.model.ipv4});case 18:return e.dialog=!1,t.next=21,e.getAll();case 21:t.next=26;break;case 23:t.prev=23,t.t2=t["catch"](10),"A node with this MAC address already exists"==t.t2.response.data.message?e.$toast.error("مک آدرس در سامانه تکراری می باشد"):e.$toast.error("خطایی رخ داد");case 26:return t.prev=26,e.createLoading=!1,t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[10,23,26,29]])})))()},addSensor:function(){this.mode="add",this.dialog=!0},edit:function(e){this.mode="edit",this.model={macAddress:e.macAddress,ipv4:e.ipv4,name:e.name,version:e.version},this.selected=e,this.dialog=!0},deleteSensor:function(e){console.log(e),this.selected=e,this.deleteConfirmDialog=!0},deleteSensorConfirm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].delete(e.selected._id);case 3:return t.next=5,e.getAll();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$toast.error("خطایی رخ داد");case 10:return t.prev=10,e.deleteConfirmDialog=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))()}}},v=f,p=(a("46d8"),a("2877")),h=Object(p["a"])(v,r,n,!1,null,"a3d592c8",null);t["default"]=h.exports},eb44:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("BaseModal",{attrs:{show:e.show,maxWidth:600,title:e.title},on:{close:function(t){return e.$emit("close")}}},[a("div",{staticClass:"confirm-modal__message"},[e._v(e._s(e.message))]),a("div",{staticClass:"confirm-modal__actions"},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.$emit("confirm")}}},[e._v(e._s(e.btnConfirm||"تایید"))]),a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(t){return e.$emit("cancel")}}},[e._v(e._s(e.btnCancel||"لغو"))])],1)])},n=[],s=a("d5d7"),o={name:"confirm",props:{show:{reqiure:!0,type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},btnConfirm:{type:String,default:"تایید"},btnCancel:{reqiure:!1,type:String,default:"لغو"}},components:{BaseModal:s["a"]},data:function(){return{}}},i=o,l=(a("a134"),a("2877")),c=Object(l["a"])(i,r,n,!1,null,"7eb5205e",null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-81752030.914d0b68.js.map